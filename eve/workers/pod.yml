---
apiVersion: v1
kind: Pod
metadata:
  name: worker
spec:
  containers:
    - name: unit-and-feature-tests
      image: "{{ images.unit_and_feature_tests }}"
      resources:
        requests:
          cpu: "250m"
          memory: 1Gi
        limits:
          cpu: "1"
          memory: 1Gi
      volumeMounts:
        - name: workspace
          mountPath: /home/eve/workspace
    - name: kafka
      image: spotify/kafka
      command: ["/bin/sh"]
      args: ["-c", "echo", "message.max.bytes=5000020", ">> /opt/kafka_2.11-0.10.1.0/config/server.properties"]
      resources:
        requests:
          cpu: "250m"
          memory: 1Gi
        limits:
          cpu: "1"
          memory: 1Gi
    - name: redis
      image: redis:alpine
      resources:
        requests:
          cpu: "250m"
          memory: 1Gi
        limits:
          cpu: "1"
          memory: 1Gi
  volumes:
    - name: workspace
      emptyDir: {}
